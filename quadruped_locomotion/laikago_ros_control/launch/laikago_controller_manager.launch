<?xml version="1.0"?>
<launch>

  <arg name="kinect_enabled" default="true"/>
  <arg name="robot_namespace" default="/"/>

<include file="$(find xsens_driver)/launch/xsens_driver.launch">
  </include>
  <!-- <param name="robot_description" command="$(find xacro)/xacro '$(find simpledog)/urdf/quadruped_model.urdf.xacro'
  inorder
  robot_namespace:=$(arg robot_namespace)
  kinect_enabled:=$(arg kinect_enabled)"/> -->
  <arg name="user_debug" default="false"/>

    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(find simpledog)/urdf/laikago/my_laika.xacro'
            DEBUG:=$(arg user_debug)"/>
  <param name="/free_gait/robot_state" value="/legodom/robot_states" />
  <!--<param name="robot_description" textfile="$(find simpledog)/urdf/simpledog.urdf.xacro"/>-->

  <!--<node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />-->

  <!-- <include file="$(find pressure_sensor)/launch/pressure_sensor.launch">

  </include> -->

  <!-- <param name="/use_gazebo_feedback" value="false"/> -->

  <param name="/legodom/use_gazebo_feedback" value="false"/>

  <param name="/real_time_factor" value="1" />
  <param name="/cal_fator_x" value="1.0" />
  <param name="/cal_fator_y" value="1.0" />
  <param name="/cal_fator_z" value="1.0" />

<!-- Load controller configuration -->

<!-- <include file="$(find xsens_driver)/launch/xsens_driver.launch"> -->

<!-- </include> -->
<!-- <remap from="/imu/data" to="/imu" /> -->
<param name="/imu_topic_name" value="/imu/data" />
<param name="/use_kin_state" value="true" />
<param name="/use_pronto_pose" value="false" />
<param name="/use_pronto_twist" value="true" />
<param name="/use_imu_orientation" value="true" />

<rosparam command="load" file="$(find balance_controller)/config/control_laikago.yaml" />
<rosparam command="load" file="$(find balance_controller)/config/controller_gains.yaml" />
    <!-- Load joint controller configurations from YAML file to parameter server -->
    <rosparam file="$(find laikago_gazebo)/config/robot_control.yaml" command="load"/>

    <!-- load the controllers -->
<!--    <node pkg="controller_manager" type="spawner" name="base_controller_spawner" respawn="false"
          output="screen" args="
	  state_estimate_update
          FL_hip_controller FL_thigh_controller FL_calf_controller
          FR_hip_controller FR_thigh_controller FR_calf_controller
          RL_hip_controller RL_thigh_controller RL_calf_controller
          RR_hip_controller RR_thigh_controller RR_calf_controller "/> -->
<!-- Spawn controllers -->
<node name="base_controller_spawner" pkg="controller_manager" type="spawner"
      args=" state_estimate_update
all_joints_position_group_controller" />



<node name="laikago_controller_manager" pkg="laikago_ros_control" type="laikago_controller_manager" args="" output="screen" respawn="false"/>

<node name="base_controller_spawner_stopped" pkg="controller_manager" type="spawner"
      args="--stopped
              all_joints_position_effort_group_controller
              base_balance_controller " />
<!--get joint states and pub the robot tf-->
<node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="1000.0"/>
    <param name="ignore_timestamp" type= "bool" value="false" />
</node>

  <node pkg="rviz" type="rviz" name="rviz" respawn="false" output="screen"
        args="-d $(find laikago_description)/launch/check_joint.rviz"/>

<!-- Spawn robot in gazebo (the world file has already include the robot)-->
<!--<node name="spawn_simpledog_model" pkg="gazebo_ros" type="spawn_model"
    args="-x $(arg x)
    -y $(arg y)
    -z $(arg z)
    -Y $(arg yaw)
    -unpause
    -urdf
    -param robot_description
    -model $(arg robot_namespace)" />-->
</launch>
